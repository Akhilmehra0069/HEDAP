<aura:component extends="c:STG_CMP_Base">
    <aura:handler name="init" value="{!this}" action="{!c.init}"/>
    
    <aura:attribute name="hierarchySettings" type="Hierarchy_Settings__c" />
    <aura:attribute name="afflMappings" type="Affl_Mappings__c[]" />  
    
    <aura:handler event="c:STG_EVT_Edit" action="{!c.toggleIsView}"/>
    <aura:handler event="c:STG_EVT_Save" action="{!c.saveMappings}"/>
    <aura:handler event="c:STG_EVT_Cancel" action="{!c.resetSettings}"/>
    
    <div id="afflTabs" class="slds-tabs--scoped">
        <ul class="slds-tabs--scoped__nav" role="tablist">
            <li aura:id="settsTab" class="slds-tabs__item slds-text-heading--label" title="Item One" role="presentation">
                <ui:outputURL value="#" label="Settings" click="{!c.settsLinkClicked}" />
            </li>
            <li aura:id="mappingsTab" class="slds-tabs__item slds-text-heading--label" title="Item Two" role="presentation">
                <ui:outputURL value="#" label="Affiliation Mappings" click="{!c.mappingsLinkClicked}" />
            </li>
        </ul>
        
        <div aura:id="settsTabContent" class="slds-tabs__content" role="tabpanel">
            <div class="slds-grid slds-wrap">
                <div class="slds-col slds-size--1-of-1">Related Affiliation deleted when Program Enrollment deleted:</div>
                <div class="slds-col slds-grid slds-wrap slds-size--1-of-1 slds-m-top--medium">
                    
                    <div class="slds-col slds-size--1-of-2">Yes:</div> 
                    <div class="slds-col slds-size--1-of-2">
                         <aura:if isTrue="{!v.hierarchySettings.Affl_ProgEnroll_Del__c}">
                             <aura:if isTrue="{!v.isView}">
                                 <ui:radioMenuItem aura:id="affl_del_yes" selected="true" />
                             <aura:set attribute="else">
                                 <ui:inputRadio aura:id="affl_del_yes" name="affldel" value="true" 
                                     label="true" labelClass="slds-hide" change="{!c.setAfflProgEnrollDel}" />
                             </aura:set>
                             </aura:if>
                         <aura:set attribute="else">
                             <aura:if isTrue="{!v.isView}">
                                 <ui:radioMenuItem aura:id="affl_del_yes" selected="false" />
                             <aura:set attribute="else">
                                 <ui:inputRadio aura:id="affl_del_yes" name="affldel" value="false" 
                                     label="true" labelClass="slds-hide" change="{!c.setAfflProgEnrollDel}" />
                             </aura:set>
                             </aura:if>
                         </aura:set>
                         </aura:if>
                    </div>
                            
                    <div class="slds-col slds-size--1-of-2">
                         <div class="slds-col slds-grid slds-wrap">
                            <div class="slds-col slds-size--1-of-2">No, just change Status to:</div>
                            <div class="slds-col slds-size--1-of-2">
                                <aura:if isTrue="{!v.isView}">
                                    <ui:outputText aura:id="ProgEnrollDel" value="{!v.hierarchySettings.Affl_ProgEnroll_Del_Status__c}"/>
                                 <aura:set attribute="else">
                                    <ui:inputText aura:id="ProgEnrollDel" value="{!v.hierarchySettings.Affl_ProgEnroll_Del_Status__c}"/>
                                </aura:set>
                                </aura:if>
                            </div>
                         </div>
                    </div>
                    <div class="slds-col slds-size--1-of-2">
                         <aura:if isTrue="{!v.hierarchySettings.Affl_ProgEnroll_Del__c}">
                             <aura:if isTrue="{!v.isView}">
                                 <ui:radioMenuItem aura:id="affl_del_no" selected="false" />
                             <aura:set attribute="else">
                                 <ui:inputRadio aura:id="affl_del_no" name="affldel" value="false"
                                     label="false" labelClass="slds-hide" change="{!c.setAfflProgEnrollDel}" />
                             </aura:set>
                             </aura:if>
                         <aura:set attribute="else">
                             <aura:if isTrue="{!v.isView}">
                                 <ui:radioMenuItem aura:id="affl_del_no" selected="true" />
                             <aura:set attribute="else">
                                 <ui:inputRadio aura:id="affl_del_no" name="affldel" value="true" 
                                     label="false" labelClass="slds-hide" change="{!c.setAfflProgEnrollDel}" />
                             </aura:set>
                             </aura:if>
                         </aura:set>
                         </aura:if>
                    </div>
                </div>
            </div>
        </div>
        
        <div aura:id="mappingsTabContent" class="slds-tabs__content" role="tabpanel">
            <div class="slds-grid slds-wrap">
                 <div class="slds-col slds-size--1-of-6"><strong>Account Record Type</strong></div>
                 <div class="slds-col slds-size--1-of-6"><strong>Contact Primary Affl Field</strong></div>
                 <div class="slds-col slds-size--1-of-6"><strong>Auto-Enrollment</strong></div>
                 <div class="slds-col slds-size--1-of-6"><strong>Auto-Enrollment Status</strong></div>
                 <div class="slds-col slds-size--1-of-6"><strong>Auto-Enrollment Role</strong></div>
                 <div class="slds-col slds-size--1-of-6">&nbsp;</div>
            
                 <aura:iteration items="{!v.afflMappings}" var="afflMapping" indexVar="position">
                     <div class="slds-col slds-size--1-of-6">
                         <aura:if isTrue="{!v.isView}">
                             <ui:outputText value="{!afflMapping.Account_Record_Type__c}"/>
                         <aura:set attribute="else">
                             <ui:inputText value="{!afflMapping.Account_Record_Type__c}"/>
                         </aura:set>
                         </aura:if>
                     </div>
                     <div class="slds-col slds-size--1-of-6">
                         <aura:if isTrue="{!v.isView}">
                             <ui:outputText value="{!afflMapping.Primary_Affl_Field__c}"/>
                         <aura:set attribute="else">
                             <ui:inputText value="{!afflMapping.Primary_Affl_Field__c}"/>
                         </aura:set>
                         </aura:if>
                     </div>
                     <div class="slds-col slds-size--1-of-6">
                         <aura:if isTrue="{!v.isView}">
                             <ui:outputCheckbox value="{!afflMapping.Auto_Program_Enrollment__c}"/>
                         <aura:set attribute="else">
                             <ui:inputCheckbox value="{!afflMapping.Auto_Program_Enrollment__c}"/>
                         </aura:set>
                         </aura:if>
                     </div>
                     <div class="slds-col slds-size--1-of-6">
                         <aura:if isTrue="{!v.isView}">
                             <ui:outputText value="{!afflMapping.Auto_Program_Enrollment_Status__c}"/>
                         <aura:set attribute="else">
                             <ui:inputText value="{!afflMapping.Auto_Program_Enrollment_Status__c}"/>
                         </aura:set>
                         </aura:if>
                     </div>
                     <div class="slds-col slds-size--1-of-6">
                         <aura:if isTrue="{!v.isView}">
                             <ui:outputText value="{!afflMapping.Auto_Program_Enrollment_Role__c}"/>
                         <aura:set attribute="else">
                             <ui:inputText value="{!afflMapping.Auto_Program_Enrollment_Role__c}"/>
                         </aura:set>
                         </aura:if>
                     </div>
                     <div class="slds-col slds-size--1-of-6">
                         <c:svgIcon svgPath="{! '/resource/' + v.namespacePrefix + 'SLDS/assets/icons/utility-sprite/svg/symbols.svg#delete' }" 
                             category="utility" size="small" name="delete" class="slds-theme--inverse" pressIcon="{!c.deleteAfflMappingRow}" 
                             id="{!afflMapping.Id}" position="{!position}" /></div>
                 </aura:iteration>
             </div>
             <div class="newafflmapping">
                <div aria-labelledby="newafflmappingform">
                  <fieldset class="slds-box slds-theme--default slds-container--medium">
                    <legend id="newafflmappingform" class="slds-text-heading--medium slds-p-vertical--medium">New Affiliation Mapping</legend>
                      <div class="slds-form--inline slds-form-element">
                        <label class="slds-form-element__label" for="accRecType">&nbsp;</label>
                        <div class="slds-form-element__control"><ui:inputText aura:id="accRecType" placeholder="Account Record Type" label="Account Record Type" labelClass="slds-hide"/></div>
                        <label class="slds-form-element__label" for="primaryField">&nbsp;</label>
                        <div class="slds-form-element__control"><ui:inputText aura:id="primaryField" placeholder="Primary Affl Field" label="Primary Affl Field" labelClass="slds-hide"/></div>
                        <label class="slds-form-element__label" for="autoEnroll">&nbsp;Auto-Enrollment:</label>
                        <div class="slds-form-element__control"><ui:inputCheckbox aura:id="autoEnroll" label="Auto-Enroll" labelClass="slds-hide"/></div>
                        <label class="slds-form-element__label" for="autoEnrollStatus">&nbsp;</label>
                        <div class="slds-form-element__control"><ui:inputText aura:id="autoEnrollStatus" placeholder="Status" label="Status" labelClass="slds-hide"/></div>
                        <label class="slds-form-element__label" for="autoEnrollRole">&nbsp;</label>
                        <div class="slds-form-element__control"><ui:inputText aura:id="autoEnrollRole" placeholder="Role" label="Role" labelClass="slds-hide"/></div>
                      </div>
                      <ui:button class="slds-button slds-button--brand slds-m-top--medium" press="{!c.newAfflMapping}">Add Mapping</ui:button>
                  </fieldset>
                </div>
              </div>
        </div>
    </div>
</aura:component>